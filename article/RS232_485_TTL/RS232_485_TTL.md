# RS232、RS485和TTL
作为一个底层软件开发工程师，经常会碰到RS232、RS485和TTL这一类的问题，之前总是碰到问题之后Google一下，把当下的问题解决了之后就不管了，过个一两天就忘得一干二净，结果后续每次都会碰到类似的问题，都是从零开始地去解决，这种方式看起来当时快速解决了问题，结果在后续的开发中浪费了更多的时间。为了解决这个问题，博主决定一次性把这些东西给弄清楚

## 串行通信
串行通信是指 使用一条数据线，将数据一位一位地依次传输，每一位数据占据一个固定的时间长度。其只需要少数几条线就可以在系统间交换信息，特别适用于计算机与计算机、计算机与外设之间的远距离通信。串行通信在传输方式上分为同步通信和异步通信，在传输方向上分为单工通信，半双工通信，全双工通信。
### 同步通信
顾名思义，同步通信需要通信双方进行数据同步，一般表现为通信双方在时钟线上的统一,双方在在数据的收发上是同时的，根据时钟线的跳变来操作数据线实现发送(读取)，常用的同步协议有SPI I2C。
### 异步通信
异步通信不需要建立数据同步即可传输数据，发送方按照一定的协议格式来发送数据，接收方接收到数据再根据协议进行解析，双方的收发不需要同时进行，也不需要进行传输时的校验，RS232，485和UART就属于这一类。
### 同步通信和异步通信的优劣
在这里，我们不妨可以先思考一下，同步通信和异步通信最根本的区别是什么？从这里出发就可以知道两者在通信上本质的区别。
同步通信，通信双方遵循相同的时钟，每一个帧数据的收发都是需要经过双方共同确认，然后再进行下一帧传输。  
而异步通信则不然，在发送发看来，需要发送数据的时候，只负责把数据发出去就行了，接受方到底收没收到或者怎么解析不需要发送方操心。
从上述的原理上的区别出发，我们以发送0x55(01010101b)为例，可以发现两者通信的区别：  
在同步发送中，数据线上只需要根据时钟发送数据01010101，接收方同时也可以根据时钟来解析收到的数据。但是在异步发送中，因为没有时钟同步，如果发送方仅仅将数据01010101发送出来，接收方无法解析接收到的数据。原因有两个：
1. 是接收方不知道数据是以一个什么样的间隔时间发送过来的，可能发送方的时钟频率和配置决定了发送为1bit/us，但是接收方的时钟配置不一致，就出现解析错误。
2. 是接受方无法判断数据的开始和结束，如果数据线的默认电平为高，发送数据的第一位也为高，将难以判断数据是从哪里开始。
所以，针对这两个问题，异步通信提出了两个相应的解决方案：
1. 通信双方遵循相同的传输速率，即波特率
2. 在通信协议中加入开始位，结束位，校验位以实现数据的接收时解析。
1、可以看出，同步通信中的数据传输效率(注意是效率，非速率)要高于异步传输，同步传输效率一般能达到100%，而异步传输中传输的数据并非全是有效数据，像串口协议中，常用配置中(1停止位，无校验)传输一个字节需要传送10bit。
2、在更复杂的应用中，同步传输可以做到点对多点的传输，多点可以共用一个时钟线，可以轻松实现一点写，多点读的操作。而在异步通信中，无法确定接收方接收数据的时间，所以不适用于点对多点的传输。
3、在相同的时钟频率下，传输效率高的同步通信自然能达到更高的数据吞吐量。
4、异步传输在传输效率上比同步传输低，但是同时也省去了同步所需要的时间，尤其是在远距离传输时，时钟同步所带来的开销也是不容忽视的，所以在长距离的传输中，一般使用异步通信，如RS485就支持KM级别的距离传输，而SPI I2C一般都用于板级通信。
5、异步传输不需要时钟线，更容易实现且节省资源。

### 单工通信
单工即单向通信，在整个数据传输的过程中只允许定向地传输数据
### 半双工通信
双工即双向通信，半双工指的是在同一时刻，只允许一个方向的发送接收，就像两个人打电话，A可以对B说话，B可以对A说话，但是A/B不能同时说话，那样会造成混乱。
### 全双工通信
全双工通信就是允许数据在两个方向上同时传输。数据的收和发之间不会相互影响。

## RS232 RS485 TTL电平
RS232 RS485 TTL同属于异步串行通信，这三种通信方式本质上是电平逻辑的区别。
### RS232
RS232多用于电脑的串口，目前使用最广泛的就DB9接口，即九线接口，目前一般的电脑主机后面都会有这样的接口，RS232电平采用负逻辑
### RS485
RS485多用于长距离传输的应用场景，大多数是在工业场景中，RS485电平逻辑采用差分电平，
### TTL电平
目前我们熟知的单片机基本上都是使用的TTL电平

### 串行通信流控

### 不同电平之间的相互转换