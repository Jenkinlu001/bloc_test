# C语言强、弱符号，强、弱引用
## 符号定义
在编程中我们经常碰到符号重复定义的情况，当我们在同一个作用域内重复定义同一个变量时，有时是因为误写，有时是文件之间的冲突，编译器的处理方式就是报错：

    redefinition of 'xxx'
注意，这里针对于同一作用域才会有冲突，如果是不同作用域，比如全局和局部，即使是相同变量名，也是不会报错，编译器会默认根据一定的优先级处理，总是更小作用域的变量覆盖更大作用域的变量，前提是这两个变量的作用域是包含与被包含的关系。  
初学C语言的朋友对于作用域的划分有一定的误解，认为函数是划分作用域的界限，函数外的就是全局，函数内的就是局部。  
事实上，在C语言中，作用域的分类方式是代码块作用域和文件作用域，文件作用域即定义在函数之外的的变量可以跨文件访问，代码块作用域指的是由花括号限定的作用域，它不仅仅限于函数体，在C99中将其扩展到了for,while,if语句所控制的代码，甚至可以在函数内以单独的花括号存在，我们不妨看看以下的示例：
示例1：

    int main()
    {
        {
            int x=1;
        }
        x = 2;
    }
编译输出的结果是：

    error: ‘x’ undeclared (first use in this function)
示例2：

    for(int i=0;i<4;i++){}
    i = 1
输出的结果是：

    error: ‘x’ undeclared (first use in this function)
在C语言中，我们可以简单地认为花括号是作用域的分隔符。  

## 强符号和弱符号
在同一作用域下不能定义同一个变量或函数，很多C语言学习者都理所当然地这么认为。  
这个概念其实是错误的，或者说至少是有所偏颇的，在GCC中，对于符号而言，存在着强符号和弱符号之分。  
对于C/C++而言，编译器默认函数和已初始化的全局变量为强符号，而未初始化的全局变量为弱符号，  在编程者没有显示指定时，编译器对强弱符号的定义会有一些默认行为，同时开发者也可以对符号进行指定，使用"__attribute__"来声明一个符号为弱符号。  
定义一个相同的变量，当两者不全是强符号时，gcc在编译时并不会报错，而是遵循一定的规则进行取舍：
* 当两者都为强符号时，报错：redefinition of 'xxx'
* 当两者为一强一弱时，选取强符号的值
* 当两者同时为弱时，选择其中占用空间较大的符号，这个其实很好理解，编译器不知道编程者的用意，选择占用空间大的符号至少不会造成诸如溢出、越界等严重后果。

    







